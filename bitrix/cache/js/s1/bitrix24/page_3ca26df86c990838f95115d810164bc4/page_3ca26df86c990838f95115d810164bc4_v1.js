
; /* Start:"a:4:{s:4:"full";s:96:"/bitrix/components/bitrix/ui.sidepanel.wrapper/templates/.default/template.min.js?16992580965071";s:6:"source";s:77:"/bitrix/components/bitrix/ui.sidepanel.wrapper/templates/.default/template.js";s:3:"min";s:81:"/bitrix/components/bitrix/ui.sidepanel.wrapper/templates/.default/template.min.js";s:3:"map";s:81:"/bitrix/components/bitrix/ui.sidepanel.wrapper/templates/.default/template.map.js";}"*/
(function(){BX.namespace("BX.UI.SidePanel");if(BX.UI.SidePanel.Wrapper){return}function t(t){}t.prototype.init=function(t){this.container=BX(t.containerId);this.isCloseAfterSave=t.isCloseAfterSave||false;this.isReloadGridAfterSave=t.isReloadGridAfterSave||false;this.isReloadPageAfterSave=t.isReloadPageAfterSave||false;this.skipNotification=t.skipNotification||false;this.useLinkTargetsReplacing=t.useLinkTargetsReplacing||false;this.notification=t.notification||{};var e=BX.SidePanel.Instance.getPreviousSlider(BX.SidePanel.Instance.getSliderByWindow(window));this.parentWindow=e?e.getWindow():top;this.initEditableTitle(t);if(this.isReloadGridAfterSave){if(this.getParam("reloadGridAfterSave")){this.reloadGridOnParentPage()}this.setParam("reloadGridAfterSave",true)}if(this.isCloseAfterSave){if(this.getParam("closeAfterSave")){var i;if(this.notification.content&&top.BX&&!this.getParam("skipNotification")){i=function(){top.BX.loadExt("ui.notification").then(function(){top.BX.UI.Notification.Center.notify(this.notification)}.bind(this))}.bind(this)}else if(this.isReloadPageAfterSave){i=function(){this.parentWindow.location.reload()}.bind(this)}BX.SidePanel.Instance.close(false,i)}if(this.skipNotification){this.setParam("skipNotification",true)}this.setParam("closeAfterSave",true)}if(this.useLinkTargetsReplacing){this.initLinkTargetsReplacing()}};t.prototype.initEditableTitle=function(t){if(!t.title||!t.title.selector||!t.title.defaultTitle){return}var i=this.container.querySelector(t.title.selector);if(!i){return}var n=i.querySelector('input[type="text"]');if(!n){return}i.style.display="none";e.init({dataContainer:i,dataNode:n,defaultTitle:t.title.defaultTitle})};t.prototype.initLinkTargetsReplacing=function(){this.replaceLinkTargets();if(!window.MutationObserver){return}var t=new MutationObserver(this.domMutationHandler.bind(this));t.observe(this.container,{childList:true,subtree:true})};t.prototype.domMutationHandler=function(t){t.forEach(function(t){for(var e=0;e<t.addedNodes.length;++e){var i=t.addedNodes.item(e);if(!i){continue}this.replaceLinkTargets(i)}},this)};t.prototype.replaceLinkTargets=function(t){if(!t){t=document.body}var e=[];if(t.tagName==="A"){e=[t]}else if(t.nodeName!=="#text"){e=BX.convert.nodeListToArray(t.querySelectorAll("a"))}if(e.length===0){return}BX.convert.nodeListToArray(e).filter(function(t){return!t.target}).forEach(function(t){t.target="_top"})};t.prototype.setParam=function(t,e){var i=BX.SidePanel.Instance.getSliderByWindow(window);if(i){i.getData().set(t,e)}};t.prototype.getParam=function(t){var e=BX.SidePanel.Instance.getSliderByWindow(window);if(e){return e.getData().get(t)}return undefined};t.prototype.removeParam=function(t){var e=BX.SidePanel.Instance.getSliderByWindow(window);if(e){e.getData().delete(t)}};t.prototype.reloadGridOnParentPage=function(){var t=this.parentWindow;var e=BX.type.isString(this.isReloadGridAfterSave)?this.isReloadGridAfterSave:null;if(!t.BX.Main||!t.BX.Main.gridManager){return}if(e==="all"){t.BX.Main.gridManager.data.forEach(function(t){t.instance.reload()});return}if(!e&&t.BX.Main.gridManager.data){var i=t.BX.Main.gridManager.data;e=i.length>0?i[0].id:null}if(!e){return}var n=t.BX.Main.gridManager.getById(e);if(!n){return}n.instance.reload()};var e={isInit:false,init:function(t){this.dataNode=t.dataNode;this.titleNode=document.querySelector(".ui-side-panel-wrap-title-name");this.inputNode=document.querySelector(".ui-side-panel-wrap-title-input");this.buttonNode=document.querySelector(".ui-side-panel-wrap-title-edit-button");this.initialTitle=this.titleNode.textContent;this.defaultTitle=t.defaultTitle;BX.bind(this.dataNode,"bxchange",this.onDataNodeChange.bind(this));BX.bind(this.buttonNode,"click",this.startEdit.bind(this));BX.bind(this.inputNode,"keyup",this.onKeyUp.bind(this));BX.bind(this.inputNode,"blur",this.endEdit.bind(this));this.isInit=true;if(!t.disabled){this.enable()}if(!this.dataNode.value){this.dataNode.value=this.defaultTitle}},enable:function(t){t=t||false;if(!this.isInit){return}this.changeDisplay(this.buttonNode,!t);this.titleNode.textContent=!t?this.dataNode.value?this.dataNode.value:this.defaultTitle:this.initialTitle},disable:function(){this.enable(true)},onDataNodeChange:function(){this.titleNode.textContent=this.dataNode.value},onKeyUp:function(t){t=t||window.event;if(t.keyCode===10||t.keyCode===13){this.endEdit();t.preventDefault();return false}},getTitle:function(){var t=this.dataNode.value;if(!t){t=this.titleNode.textContent}return t},startEdit:function(){this.inputNode.value=this.getTitle();this.changeDisplay(this.titleNode,false);this.changeDisplay(this.buttonNode,false);this.changeDisplay(this.inputNode,true);this.inputNode.focus()},endEdit:function(){this.dataNode.value=this.inputNode.value;this.titleNode.textContent=this.inputNode.value;this.changeDisplay(this.inputNode,false);this.changeDisplay(this.buttonNode,true);this.changeDisplay(this.titleNode,true)},changeDisplay:function(t,e){return t.style.display=e?"":"none"}};BX.UI.SidePanel.Wrapper=new t})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:96:"/bitrix/components/bitrix/bizproc.debugger.start/templates/.default/script.min.js?16992579524430";s:6:"source";s:77:"/bitrix/components/bitrix/bizproc.debugger.start/templates/.default/script.js";s:3:"min";s:81:"/bitrix/components/bitrix/bizproc.debugger.start/templates/.default/script.min.js";s:3:"map";s:81:"/bitrix/components/bitrix/bizproc.debugger.start/templates/.default/script.map.js";}"*/
this.BX=this.BX||{};this.BX.Bizproc=this.BX.Bizproc||{};(function(e,t,i,n,s){"use strict";function a(e,t){l(e,t);t.add(e)}function r(e,t,i){l(e,t);t.set(e,i)}function l(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function o(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var c=t.Reflection.namespace("BX.Bizproc.Component");var u=new WeakMap;var h=new WeakMap;var b=new WeakMap;var d=new WeakSet;var p=new WeakSet;var v=new WeakSet;var f=new WeakSet;var B=new WeakSet;var g=new WeakSet;var m=new WeakSet;var S=new WeakSet;var w=new WeakSet;var k=function(){function e(i){babelHelpers.classCallCheck(this,e);a(this,w);a(this,S);a(this,m);a(this,g);a(this,B);a(this,f);a(this,v);a(this,p);a(this,d);r(this,u,{writable:true,value:""});r(this,h,{writable:true,value:null});r(this,b,{writable:true,value:null});babelHelpers.classPrivateFieldSet(this,u,i.documentSigned);babelHelpers.classPrivateFieldSet(this,h,i.activeSession?new n.Session(i.activeSession):null);babelHelpers.classPrivateFieldSet(this,b,t.Text.toInteger(i.currentUserId))}babelHelpers.createClass(e,[{key:"init",value:function e(){if(babelHelpers.classPrivateFieldGet(this,h)){o(this,d,E).call(this);o(this,v,H).call(this);if(babelHelpers.classPrivateFieldGet(this,b)===babelHelpers.classPrivateFieldGet(this,h).startedBy){o(this,f,P).call(this)}}else{o(this,B,C).call(this)}}},{key:"buttons",get:function e(){var t={};t[n.Mode.experimental.id]=document.getElementById("bizproc-debugger-start-experimental-element");t[n.Mode.interception.id]=document.getElementById("bizproc-debugger-start-interception-element");return t}}]);return e}();function E(){var e=this.buttons;Object.keys(e).forEach((function(i){t.Dom.addClass(e[i],"ui-btn-disabled")}))}function D(){var e=this.buttons;Object.keys(e).forEach((function(i){t.Dom.removeClass(e[i],"ui-btn-disabled");t.Dom.attr(e[i],"disabled",null)}))}function H(){var e=this;if(!babelHelpers.classPrivateFieldGet(this,h)){return}var i=this.buttons;Object.keys(i).forEach((function(n){t.Dom.attr(i[n],"data-hint",t.Text.encode(babelHelpers.classPrivateFieldGet(e,h).shortDescription));t.Dom.attr(i[n],"data-hint-no-icon","y");BX.UI.Hint.init(BX(i[n].id).parentElement)}))}function P(){var e=this.buttons;var i=babelHelpers.classPrivateFieldGet(this,h).modeId;if(e[i]){var n=e[i].id;var a=new s.Button({props:{id:n},color:s.ButtonColor.LIGHT_BORDER,size:s.ButtonSize.SMALL,text:t.Loc.getMessage("BIZPROC_DEBUGGER_START_TEMPLATE_FINISH"),round:true,onclick:o(this,m,I).bind(this)});t.Dom.replace(e[i],a.render())}}function C(){var e=this;var i=this.buttons;Object.keys(i).forEach((function(n){t.Event.bind(i[n],"click",(function(){o(e,g,F).call(e,i[n],n)}))}))}function F(e,i){var n=this;top.BX.Runtime.loadExtension("bizproc.debugger").then((function(s){o(n,d,E).call(n);t.Dom.addClass(e,"ui-btn-wait");var a=s.Manager;a.Instance.startSession(babelHelpers.classPrivateFieldGet(n,u),t.Text.toInteger(i)).then((function(){o(n,p,D).call(n);BX.SidePanel.Instance.closeAll();return true}),(function(i){o(n,w,X).call(n,i,(function(){o(n,p,D).call(n);t.Dom.removeClass(e,"ui-btn-wait");return true}))}))}))}function I(e){var t=this;e.setDisabled(true);e.setWaiting(true);if(top.BX.Bizproc.Debugger){top.BX.Bizproc.Debugger.Manager.Instance.askFinishSession(babelHelpers.classPrivateFieldGet(this,h)).then(o(this,S,T).bind(this),(function(i){o(t,w,X).call(t,i,(function(){e.setDisabled(false);e.setWaiting(false);return true}))}))}else{babelHelpers.classPrivateFieldGet(this,h).finish().then(o(this,S,T).bind(this),(function(i){o(t,w,X).call(t,i,(function(){e.setDisabled(false);e.setWaiting(false);return true}))}))}}function T(){var e=this.buttons;var i=babelHelpers.classPrivateFieldGet(this,h).modeId;var n=e[i].id;o(this,p,D).call(this);babelHelpers.classPrivateFieldSet(this,h,null);t.Dom.replace(e[i],new s.Button({props:{id:n},color:s.ButtonColor.SUCCESS,size:s.ButtonSize.SMALL,text:t.Loc.getMessage("BIZPROC_DEBUGGER_START_TEMPLATE_START"),round:true}).render());this.init()}function X(e,n){if(t.Type.isArrayFilled(e.errors)){var s="";e.errors.forEach((function(e){s=s+"\n"+e.message}));i.MessageBox.alert(s,n)}else if(t.Type.isFunction(n)){n()}}c.DebuggerStartComponent=k})(this.BX.Bizproc.Component=this.BX.Bizproc.Component||{},BX,BX.UI.Dialogs,BX.Bizproc.Debugger,BX.UI);
/* End */
;; /* /bitrix/components/bitrix/ui.sidepanel.wrapper/templates/.default/template.min.js?16992580965071*/
; /* /bitrix/components/bitrix/bizproc.debugger.start/templates/.default/script.min.js?16992579524430*/

//# sourceMappingURL=page_3ca26df86c990838f95115d810164bc4.map.js